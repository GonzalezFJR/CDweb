{% extends "base.html" %}

{% block content %}
<section class="hero">
  <div class="hero-slider{% if not home_images %} hero-placeholder{% endif %}" data-images='{{ home_images | tojson }}'>
    <div class="hero-overlay">
      <h1>Asociación Cielos Despejados</h1>
      {% if not home_images %}
      <p class="hero-helper">Añade imágenes en <strong>/static/pics/home/</strong> para activar la galería.</p>
      {% endif %}
    </div>
  </div>
</section>

<section class="section container reveal">
  <div class="section-grid">
    <div class="section-media">
      <div class="mini-slider" data-images='{{ photos | map(attribute="image_url") | list | tojson }}'>
        {% if photos %}
        <img src="{{ photos[0].image_url }}" alt="Astrofoto" />
        {% else %}
        <div class="placeholder">Próximamente nuevas astrofotos</div>
        {% endif %}
      </div>
    </div>
    <div class="section-text">
      <h2>Astrofotografía</h2>
      <p>
        Una selección de las últimas imágenes capturadas por nuestros socios, desde nebulosas
        hasta galaxias lejanas. Cada fotografía es fruto de noches de observación y pasión por el cielo.
      </p>
      <a class="button" href="/astrofotos">Ver más</a>
    </div>
  </div>
</section>

<section class="section container reveal">
  <div class="section-text">
    <h2>Últimas noticias</h2>
    <p>
      Descubre nuestras actividades, talleres y salidas astronómicas en el blog de la asociación.
    </p>
  </div>
  <div class="cards">
    {% for entry in blog_entries %}
    <article class="card">
      {% if entry.image_url %}
      <img src="{{ entry.image_url }}" alt="{{ entry.title }}" />
      {% endif %}
      <div class="card-content">
        <h3>{{ entry.title }}</h3>
        <p>{{ entry.summary }}</p>
        <a class="button ghost" href="/blog/{{ entry._id }}">Ver más</a>
      </div>
    </article>
    {% else %}
    {% for _ in range(3) %}
    <article class="card placeholder-card">
      <div class="placeholder-thumb"></div>
      <div class="card-content">
        <h3>Próxima publicación</h3>
        <p>Muy pronto compartiremos noticias, talleres y salidas.</p>
      </div>
    </article>
    {% endfor %}
    {% endfor %}
  </div>
  <a class="button" href="/blog">Ver todas las entradas</a>
</section>
{% endblock %}
